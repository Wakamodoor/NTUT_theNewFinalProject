import decimal
import MySQLdb as mariadb
import json

class DecimalEncoder(json.JSONEncoder):
    def default(self,o):
        if isinstance(o, decimal.Decimal):
            return float(o)
        super(DecimalEncoder , self).default(o)

db = mariadb.connect(host="localhost",user="root",db="forumors")

cursor = db.cursor(cursorclass=mariadb.cursors.DictCursor)

selectSQL = "SELECT year(datetime) AS year, MONTH(DATETIME) AS month , username , count(COMMENT) FROM foxconncomment WHERE username = 'kewei' group by year ,month "

cursor.execute(selectSQL )

result = cursor.fetchall()

print(result)

print(type(result))

print('---------------')

#print(json.dumps(result , cls=DecimalEncoder))

